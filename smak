
#!/bin/bash
# Smak - Makefile parser and build tool
# Bash wrapper script

export SMAK_LAUNCHER=$0

script=$(basename $0)
exe=$0
link=$(readlink $exe)

# Find the directory where this script is located
while [ "$link" != "$exe" -a ! -z "$link" ]  ; do
    exe=$link
    link=$(readlink $exe)
done

SCRIPT_DIR="$(dirname $exe)"

# Pass the invocation name to smak.pl via environment variable
# Use basename so $(MAKE) is set to "smak" not the full path
export SMAK_INVOKED_AS="$(basename "$0")"

# Set launcher path for bug reports
export SMAK_LAUNCHER="$SCRIPT_DIR/smak"

# Execute the Perl script with all arguments passed through
exec perl "$SCRIPT_DIR/$script.pl" "$@"
